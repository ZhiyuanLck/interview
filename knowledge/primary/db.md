# 数据库

## Redis

1. 缓存穿透

    缓存穿透是指查询一定不在缓存中存在的数据会直接去数据库查询，如果有大量这样
    的请求，缓存的作用就会失效。

    - 把无效的key也存进redis中
    - 使用布隆过滤器

1. 缓存击穿

    缓存击穿是一个热点的key，被超高并发地访问，然后这个key突然失效了，导致并发
    请求直接打到数据库上

    - 对热点key不设置过期时间
    - 使用互斥锁，缓存失效时只有拿到锁才能查询数据库

1. 缓存雪崩

    某一时刻出现大规模的缓存失效时，大量的请求会直接到达数据库，高并发的情况下
    可能会导致数据库宕机。

    解决方案：

    - 在原有的失效时间上加上一个随机值，避免采用相同的过期时间导致缓存雪崩
    - 使用熔断机制，当流量到达一定阈值时，返回“系统拥挤”之类的提示，防止数据库
      同时接收过多请求
    - 提高数据库容灾能力，采取分库、分表，读写分离的策略。
